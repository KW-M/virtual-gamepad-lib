import{G as _,a as p,D as y,d as m,b as u,c as e,C as f}from"./GamepadApiWrapper-CHaH_8P-.js";import{G as b}from"./GamepadDisplay-Cvtz-qLl.js";const o=document.getElementById("gpad-display-container"),x=document.getElementById("axis-table"),k=document.getElementById("button-table"),h=["button_1","button_2","button_3","button_4","shoulder_button_front_left","shoulder_button_front_right","shoulder_trigger_back_left","shoulder_trigger_back_right","select_button","start_button","stick_button_left","stick_button_right","d_pad_up","d_pad_down","d_pad_left","d_pad_right"],d=new _(.1),c=new p({updateDelay:0,axisDeadZone:.05,buttonConfigs:[]}),g=0;d.AddEmulatedGamepad(g,!0,y,m);S(g);D(g,o);c.onGamepadConnect(a=>{console.log("Gamepad connected: ",a)});c.onGamepadDisconnect(a=>{console.log("Gamepad disconnected: ",a)});c.onGamepadButtonChange((a,r,s)=>{for(let n=0;n<r.buttons.length;n++){if(!s[n])continue;const t=k.children[n];if(t){const i=r.buttons[n].value||0,l=t.children[2];t.style.backgroundColor=r.buttons[n].pressed?"blueviolet":r.buttons[n].touched?"greenyellow":"",l.style.backgroundColor=i==0?"":"#FF"+Math.round(i*255).toString(16).padStart(2,"0")+"00",l.innerText=i.toFixed(2)}}});c.onGamepadAxisChange((a,r,s)=>{const n=x.children[1];for(let t=0;t<s.length;t++){if(!s[t])continue;const i=n.children[t+1];if(i){const l=r.axes[t]||0;i.innerText=l.toFixed(2),i.style.backgroundColor="#"+Math.round(255-Math.max(-l,0)*255).toString(16).padStart(2,"0")+"FF"+Math.round(255-Math.max(l,0)*255).toString(16).padStart(2,"0")}}});function D(a,r){const s=h.map((t,i)=>t.includes("trigger")?{buttonIndex:i,type:u.variable,tapTarget:r.querySelector("#"+t+"_touch_target"),dragDistance:50,lockTargetWhilePressed:!0,directions:{[e.up]:!1,[e.down]:!0,[e.left]:!1,[e.right]:!1}}:{buttonIndex:i,type:u.onOff,lockTargetWhilePressed:t.includes("stick"),tapTarget:r.querySelector("#"+t+"_touch_target")});d.AddDisplayButtonEventListeners(a,s);const n=[{tapTarget:r.querySelector("#stick_button_left_touch_target"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[e.up]:!0,[e.down]:!0,[e.left]:!0,[e.right]:!0}},{tapTarget:r.querySelector("#stick_button_right_touch_target"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[e.up]:!0,[e.down]:!0,[e.left]:!0,[e.right]:!0}}];d.AddDisplayJoystickEventListeners(a,n)}function S(a){document.querySelectorAll("#stick_right, #stick_left").forEach(t=>{f(t)});const r=h.map((t,i)=>t.includes("trigger")?{type:u.variable,highlight:o.querySelector("#"+t+"_highlight"),buttonElement:o.querySelector("#"+t),direction:e.down,directionHighlight:o.querySelector("#"+t+"_direction_highlight"),movementRange:10,extraData:{myCustomData:"variable btn name is "+t}}:{type:u.onOff,highlight:o.querySelector("#"+t+"_highlight"),extraData:{myCustomData:"onOff btn name is "+t}}),s=[{joystickElement:o.querySelector("#stick_left"),xAxisIndex:0,yAxisIndex:1,movementRange:10,highlights:{[e.up]:o.querySelector("#l_stick_up_direction_highlight"),[e.down]:o.querySelector("#l_stick_down_direction_highlight"),[e.left]:o.querySelector("#l_stick_left_direction_highlight"),[e.right]:o.querySelector("#l_stick_right_direction_highlight")}},{joystickElement:o.querySelector("#stick_right"),xAxisIndex:2,yAxisIndex:3,movementRange:10,highlights:{[e.up]:o.querySelector("#r_stick_up_direction_highlight"),[e.down]:o.querySelector("#r_stick_down_direction_highlight"),[e.left]:o.querySelector("#r_stick_left_direction_highlight"),[e.right]:o.querySelector("#r_stick_right_direction_highlight")}}],n=new b({gamepadIndex:a,pressedHighlightClass:"pressed",touchedHighlightClass:"touched",moveDirectionHighlightClass:"moved",buttons:r,sticks:s,joystickDisplayFunction:function(t,i,l){n.DefaultJoystickDisplayFunction(t,i,l),t.joystickElement.style.transform=`rotateY(${i*30}deg) rotateX(${-l*30}deg) translateZ(17px)`}},c)}
