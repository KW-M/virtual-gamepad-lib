import{G as _,a as p,D as y,f,b as u,c as t,d as m,e as b}from"./GamepadDisplay.fe3e7db4.js";const i=document.getElementById("gpad-display-container"),x=document.getElementById("axis-table"),k=document.getElementById("button-table"),h=["button_1","button_2","button_3","button_4","shoulder_button_front_left","shoulder_button_front_right","shoulder_trigger_back_left","shoulder_trigger_back_right","select_button","start_button","stick_button_left","stick_button_right","d_pad_up","d_pad_down","d_pad_left","d_pad_right"],d=new _(.1),c=new p({updateDelay:0,axisDeadZone:.05,buttonConfigs:[]}),g=0;d.AddEmulatedGamepad(g,!0,y,f);S(g);D(g,i);c.onGamepadConnect(s=>{console.log("Gamepad connected: ",s)});c.onGamepadDisconnect(s=>{console.log("Gamepad disconnected: ",s)});c.onGamepadButtonChange((s,r,a)=>{for(let n=0;n<r.buttons.length;n++){if(!a[n])continue;const e=k.children[n];if(e){const o=r.buttons[n].value||0,l=e.children[2];e.style.backgroundColor=r.buttons[n].pressed?"blueviolet":r.buttons[n].touched?"greenyellow":"",l.style.backgroundColor=o==0?"":"#FF"+Math.round(o*255).toString(16).padStart(2,"0")+"00",l.innerText=o.toFixed(2)}}});c.onGamepadAxisChange((s,r,a)=>{const n=x.children[1];for(let e=0;e<a.length;e++){if(!a[e])continue;const o=n.children[e+1];if(o){const l=r.axes[e]||0;o.innerText=l.toFixed(2),o.style.backgroundColor="#"+Math.round(255-Math.max(-l,0)*255).toString(16).padStart(2,"0")+"FF"+Math.round(255-Math.max(l,0)*255).toString(16).padStart(2,"0")}}});function D(s,r){const a=h.map((e,o)=>e.includes("trigger")?{buttonIndex:o,type:u.variable,tapTarget:r.querySelector("#"+e+"_touch_target"),dragDistance:50,lockTargetWhilePressed:!0,directions:{[t.up]:!1,[t.down]:!0,[t.left]:!1,[t.right]:!1}}:{buttonIndex:o,type:u.onOff,lockTargetWhilePressed:e.includes("stick"),tapTarget:r.querySelector("#"+e+"_touch_target")});d.AddDisplayButtonEventListeners(s,a);const n=[{tapTarget:r.querySelector("#stick_button_left_touch_target"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0}},{tapTarget:r.querySelector("#stick_button_right_touch_target"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0}}];d.AddDisplayJoystickEventListeners(s,n)}function S(s){m("#stick_right, #stick_left");const r=h.map((e,o)=>(console.log(e),e.includes("trigger")?{type:u.variable,highlight:i.querySelector("#"+e+"_highlight"),buttonElement:i.querySelector("#"+e),direction:t.down,directionHighlight:i.querySelector("#"+e+"_direction_highlight"),movementRange:10,extraData:{myCustomData:"variable btn name is "+e}}:{type:u.onOff,highlight:i.querySelector("#"+e+"_highlight"),extraData:{myCustomData:"onOff btn name is "+e}})),a=[{joystickElement:i.querySelector("#stick_left"),xAxisIndex:0,yAxisIndex:1,movementRange:10,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0},highlights:{[t.up]:i.querySelector("#l_stick_up_direction_highlight"),[t.down]:i.querySelector("#l_stick_down_direction_highlight"),[t.left]:i.querySelector("#l_stick_left_direction_highlight"),[t.right]:i.querySelector("#l_stick_right_direction_highlight")}},{joystickElement:i.querySelector("#stick_right"),xAxisIndex:2,yAxisIndex:3,movementRange:10,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0},highlights:{[t.up]:i.querySelector("#r_stick_up_direction_highlight"),[t.down]:i.querySelector("#r_stick_down_direction_highlight"),[t.left]:i.querySelector("#r_stick_left_direction_highlight"),[t.right]:i.querySelector("#r_stick_right_direction_highlight")}}],n=new b({gamepadIndex:s,buttonHighlightClass:"highlight",pressedHighlightClass:"pressed",touchedHighlightClass:"touched",moveDirectionHighlightClass:"moved",buttons:r,sticks:a,joystickDisplayFunction:function(e,o,l){n.defaultJoystickDisplayFunction(e,o,l),e.joystickElement.style.transform=`rotateY(${o*30}deg) rotateX(${-l*30}deg) translateZ(17px)`}},c)}
