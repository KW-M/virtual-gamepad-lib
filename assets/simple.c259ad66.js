import{G as _,a as p,D as m,e as b,b as c,c as t,d as y}from"./GamepadDisplay.d1ce7a71.js";const i=document.getElementById("gpad-display-container"),f=document.getElementById("axis-table"),x=document.getElementById("button-table"),h=["button_1","button_2","button_3","button_4","shoulder_button_front_left","shoulder_button_front_right","shoulder_trigger_back_left","shoulder_trigger_back_right","select_button","start_button","stick_button_left","stick_button_right","d_pad_up","d_pad_down","d_pad_left","d_pad_right"],d=new _(.1),u=new p({updateDelay:300,axisDeadZone:.05,buttonConfigs:[]}),g=0;d.AddEmulatedGamepad(g,!0,m,b);D(g);A(g,i);u.onGamepadConnect(r=>{console.log("Gamepad connected: ",r)});u.onGamepadDisconnect(r=>{console.log("Gamepad disconnected: ",r)});u.onGamepadButtonChange((r,n,l)=>{console.log(`Gamepad ${r} button change: `,l);for(let e=0;e<n.buttons.length;e++){if(!l[e])continue;const o=x.children[e];if(o){const a=n.buttons[e].value||0,s=o.children[2];o.style.backgroundColor=n.buttons[e].pressed?"blueviolet":n.buttons[e].touched?"greenyellow":"",s.style.backgroundColor=a==0?"":"#FF"+Math.round(a*255).toString(16).padStart(2,"0")+"00",s.innerText=a.toFixed(2)}}});u.onGamepadAxisChange((r,n,l)=>{console.log(`Gamepad ${r} axis change: `,n.axes,l);const e=f.children[1];for(let o=0;o<l.length;o++){if(!l[o])continue;const a=e.children[o+1];if(a){const s=n.axes[o]||0;a.innerText=s.toFixed(2),a.style.backgroundColor="#"+Math.round(255-Math.max(-s,0)*255).toString(16).padStart(2,"0")+"FF"+Math.round(255-Math.max(s,0)*255).toString(16).padStart(2,"0")}}});function A(r,n){const l=h.map((o,a)=>o.includes("trigger")?{buttonIndex:a,type:c.variable,tapTarget:n.querySelector("#"+o+"_touch_target"),dragDistance:50,lockTargetWhilePressed:!0,directions:{[t.up]:!1,[t.down]:!0,[t.left]:!1,[t.right]:!1}}:{buttonIndex:a,type:c.onOff,lockTargetWhilePressed:o.includes("stick"),tapTarget:n.querySelector("#"+o+"_touch_target")});d.AddDisplayButtonEventListeners(r,l);const e=[{tapTarget:n.querySelector("#stick_button_left_touch_target"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0}},{tapTarget:n.querySelector("#stick_button_right_touch_target"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0}}];d.AddDisplayJoystickEventListeners(r,e)}function D(r){const n=h.map((e,o)=>(console.log(e),e.includes("trigger")?{type:c.variable,highlight:i.querySelector("#"+e+"_highlight"),buttonElement:i.querySelector("#"+e),direction:t.down,directionHighlight:i.querySelector("#"+e+"_direction_highlight"),movementRange:10,extraData:{myCustomData:"variable btn name is "+e}}:{type:c.onOff,highlight:i.querySelector("#"+e+"_highlight"),extraData:{myCustomData:"onOff btn name is "+e}})),l=[{joystickElement:i.querySelector("#stick_left"),xAxisIndex:0,yAxisIndex:1,movementRange:10,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0},highlights:{[t.up]:i.querySelector("#l_stick_up_direction_highlight"),[t.down]:i.querySelector("#l_stick_down_direction_highlight"),[t.left]:i.querySelector("#l_stick_left_direction_highlight"),[t.right]:i.querySelector("#l_stick_right_direction_highlight")}},{joystickElement:i.querySelector("#stick_right"),xAxisIndex:2,yAxisIndex:3,movementRange:10,directions:{[t.up]:!0,[t.left]:!0}}];new y({gamepadIndex:r,buttonHighlightClass:"highlight",pressedHighlightClass:"pressed",touchedHighlightClass:"touched",moveDirectionHighlightClass:"moved",buttons:n,sticks:l},u)}
