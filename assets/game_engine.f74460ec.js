import{G as g,a as h,D as f,e as y,b as l,c as t,d as p}from"./GamepadDisplay.d1ce7a71.js";const i=new g(.1),I=new h({updateDelay:0,axisDeadZone:.05}),r=document.body,D=8,a=0,c=1,A=2,d=3,E=["button_1","button_2","button_3","button_4","shoulder_button_front_left","shoulder_button_front_right","shoulder_trigger_back_left","shoulder_trigger_back_right","select_button","start_button","stick_button_left","stick_button_right","d_pad_up","d_pad_down","d_pad_left","d_pad_right"];function T(_,e){const s=E.map((n,u)=>n.includes("trigger")?{buttonIndex:u,type:l.variable,tapTarget:e.querySelector("#"+n+"_touch_target"),dragDistance:50,lockTargetWhilePressed:!0,directions:{[t.up]:!1,[t.down]:!0,[t.left]:!1,[t.right]:!1}}:{buttonIndex:u,type:l.onOff,lockTargetWhilePressed:n.includes("stick"),tapTarget:e.querySelector("#"+n+"_touch_target")});i.AddDisplayButtonEventListeners(_,s);const o=[{tapTarget:e.querySelector("#stick_button_left_touch_target"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[t.up]:!0,[t.down]:!1,[t.left]:!0,[t.right]:!0}},{tapTarget:e.querySelector("#stick_button_right_touch_target"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0}}];i.AddDisplayJoystickEventListeners(_,o)}function k(_){const e=E.map((o,n)=>(console.log(o),o.includes("trigger")?{type:l.variable,highlight:r.querySelector("#"+o+"_highlight"),buttonElement:r.querySelector("#"+o),direction:t.down,directionHighlight:r.querySelector("#"+o+"_direction_highlight"),movementRange:10,extraData:{myCustomData:"variable btn name is "+o}}:{type:l.onOff,highlight:r.querySelector("#"+o+"_highlight"),extraData:{myCustomData:"onOff btn name is "+o}})),s=[{joystickElement:r.querySelector("#stick_left"),xAxisIndex:0,yAxisIndex:1,movementRange:10,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0},highlights:{[t.up]:r.querySelector("#l_stick_up_direction_highlight"),[t.down]:r.querySelector("#l_stick_down_direction_highlight"),[t.left]:r.querySelector("#l_stick_left_direction_highlight"),[t.right]:r.querySelector("#l_stick_right_direction_highlight")}},{joystickElement:r.querySelector("#stick_right"),xAxisIndex:2,yAxisIndex:3,movementRange:10,directions:{[t.up]:!0,[t.down]:!0,[t.left]:!0,[t.right]:!0},highlights:{[t.up]:r.querySelector("#r_stick_up_direction_highlight"),[t.down]:r.querySelector("#r_stick_down_direction_highlight"),[t.left]:r.querySelector("#r_stick_left_direction_highlight"),[t.right]:r.querySelector("#r_stick_right_direction_highlight")}}];new p({gamepadIndex:_,buttonHighlightClass:"highlight",pressedHighlightClass:"pressed",touchedHighlightClass:"touched",moveDirectionHighlightClass:"moved",buttons:e,sticks:s},I)}function M(){i.AddEmulatedGamepad(0,!0,f,y),k(0),T(0,r),i.PressButton(0,D,1,!0),setTimeout(()=>{i.PressButton(0,D,0,!1)},2),window.onkeydown=e=>{const s=parseInt(e.key);e.key==="a"?i.MoveAxis(0,0,-1):e.key==="d"?i.MoveAxis(0,0,1):e.key==="w"?i.MoveAxis(0,1,-1):e.key==="s"?i.MoveAxis(0,1,1):e.key==="ArrowLeft"?(i.MoveAxis(0,2,-1),e.preventDefault()):e.key==="ArrowRight"?(i.MoveAxis(0,2,1),e.preventDefault()):e.key==="ArrowUp"?(i.MoveAxis(0,3,-1),e.preventDefault()):e.key==="ArrowDown"?(i.MoveAxis(0,3,1),e.preventDefault()):isNaN(s)?e.keyCode&&i.PressButton(0,e.keyCode-66+10,1,!0):i.PressButton(0,s,1,!0)},window.onkeyup=e=>{const s=parseInt(e.key);e.key==="a"||e.key==="d"?i.MoveAxis(0,a,0):e.key==="w"||e.key==="s"?i.MoveAxis(0,c,0):e.key==="ArrowLeft"||e.key==="ArrowRight"?(i.MoveAxis(0,A,0),e.preventDefault()):e.key==="ArrowUp"||e.key==="ArrowDown"?(i.MoveAxis(0,d,0),e.preventDefault()):isNaN(s)?e.keyCode&&i.PressButton(0,e.keyCode-66+10,0,!1):i.PressButton(0,s,0,!1)}}globalThis.onGameReady=()=>{var _;(_=document.querySelector("#loading-msg"))==null||_.remove(),document.querySelectorAll(".gpad-display").forEach(e=>{e.classList.remove("hidden")}),M()};
